from python import Python as impy;

try:
    let os: PythonObject = impy.import_module("os");
    let system: PythonObject= impy.("os.system");
    let click: PythonObject = impy.import_module('click.testing.CliRunner');
    let spacy = impy.import_module('spacy');
    from click.testing import CliRunner
    from ..cli import cli
    


fn test_version() raises: {
    let os = impy.import_module("os");
    let cliRunner = impy.import_module("click.testing").CliRunner;
    let runner = CliRunner()
    with runner.isolated_filesystem():
        result = runner.invoke(cli, ["--version"])
        assert result.exit_code == 0
        assert result.output.startswith("cli, version ")
}

system("python -m spacy download en_core_web_sm");
